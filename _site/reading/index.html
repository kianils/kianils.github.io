<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Reading - Lyla Kiani</title>
<meta name="description" content="Personal website of Lyla Kiani">


  <meta name="author" content="Lyla Kiani">
  


<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Lyla Kiani">
<meta property="og:title" content="Reading">
<meta property="og:url" content="http://localhost:4000/reading/">


  <meta property="og:description" content="Personal website of Lyla Kiani">











  

  


<link rel="canonical" href="http://localhost:4000/reading/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Lyla Kiani",
      "url": "http://localhost:4000/",
      "sameAs": ["https://www.instagram.com/dr.dflo"]
    
  }
</script>







<!-- end _includes/seo.html -->




<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<meta name="robots" content="noindex nofollow">
<meta name="theme-color" content="#0a0e14">
<meta name="color-scheme" content="dark">

<!-- Speed up book cover loads (Open Library Covers API) -->
<link rel="preconnect" href="https://covers.openlibrary.org" crossorigin>

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--default wide">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          Lyla Kiani
          <span class="site-subtitle">Digital Fabrication & Computer Science Portfolio</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/portfolio/">Prototyping</a>
            </li><li class="masthead__menu-item">
              <a href="/cs-projects/">CS Projects</a>
            </li><li class="masthead__menu-item">
              <a href="/reading/">Reading</a>
            </li><li class="masthead__menu-item">
              <a href="/about/">About</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      <div id="main" class="archive" role="main">
  <div class="page__inner-wrap reading-page-wrap">
    



<script type="application/json" id="reading-daily-log">{"2026-01-27":60}</script>
<script type="application/json" id="reading-books-data">[{"title":"How To Be More D&D","author":"Kat Kruger","status":"completed","isbn":"9780762478873","rating":3.5,"completed_date":"2026-01-27"},{"title":"The Well of Ascension","author":"Brandon Sanderson","status":"to_read","isbn":"9781250318572","reread":true},{"title":"The Hero of Ages","author":"Brandon Sanderson","status":"to_read","isbn":"9780575089945"},{"title":"The Knight and The Moth","author":"Rachel Gillig","status":"to_read","isbn":"9780316582704"},{"title":"A Clash of Kings","author":"George R.R. Martin","status":"to_read","isbn":"9781984821157"},{"title":"The Vampire Lestat","author":"Anne Rice","status":"reading","isbn":"9780345313867","progress_pages":119,"total_pages":512,"date_started":"2026-01-10","last_date_read":"2026-01-27","reread":true,"logs":[{"date":"2026-01-27","start_page":101,"end_page":119,"text":"alot of blood-sucking, given that we are following lestat for the first time after his trsnformation"}]},{"title":"A Knight of the Seven Kingdoms","author":"George R.R. Martin","status":"reading","progress_pages":41,"total_pages":368,"isbn":"9781101965887","date_started":"2026-01-27","last_date_read":"2026-01-27","logs":[{"date":"2026-01-27","start_page":1,"end_page":41,"text":"Dunk just sold his horse, its a barer version of the first two episodes of the show"},{"date":"2026-01-28","start_page":41,"end_page":100,"text":"Dunk the hedgeknight fr"}]},{"title":"The Autobiography of Malcom X","author":"Malcom X","status":"to_read","isbn":"9780345350688"},{"title":"The Counting House","author":"David Dabydeen","status":"reading","isbn":"9781608012534","progress_pages":50,"total_pages":288,"date_started":"2026-01-28","last_date_read":"2026-01-28","logs":[{"date":"2026-01-28","start_page":1,"end_page":50,"text":"Hard read given the subject matter, I really like how they do not shy away from the paralells between Rohini's condition after marriage and the existenstential threat of her country, the looming promise of Guyana, and I love how they show the British first trying to seperate the people along racial or religious lines"}]}]</script>





<div class="reading-detail-modal" id="reading-detail-modal" role="dialog" aria-labelledby="reading-detail-title" aria-hidden="true">
  <div class="reading-detail-overlay" data-close-modal=""></div>
  <div class="reading-detail-content">
    <button class="reading-detail-close" aria-label="Close" data-close-modal="">×</button>
    
    <div class="reading-detail-header">
      <div class="reading-detail-progress">
        <div class="reading-detail-progress-track">
          <div class="reading-detail-progress-bar" data-progress-bar=""></div>
        </div>
        <span class="reading-detail-progress-text" data-progress-text=""></span>
      </div>
    </div>

    <div class="reading-detail-body">
      <div class="reading-detail-main">
        <div class="reading-detail-info">
          <div class="reading-detail-title-wrap">
            <h2 id="reading-detail-title" class="reading-detail-title" data-book-title=""></h2>
            <span class="reading-detail-reread-badge" data-reread-badge="" style="display:none" title="Reread">↻ Reread</span>
          </div>
          <p class="reading-detail-author" data-book-author=""></p>
          
          <div class="reading-detail-dates">
            <div class="reading-detail-date-item">
              <span class="reading-detail-date-label">Started:</span>
              <span class="reading-detail-date-value" data-date-started=""></span>
            </div>
            <div class="reading-detail-date-item">
              <span class="reading-detail-date-label">Last read:</span>
              <span class="reading-detail-date-value" data-date-last=""></span>
            </div>
            <div class="reading-detail-date-item">
              <span class="reading-detail-date-label">Projected finish:</span>
              <span class="reading-detail-date-value" data-date-projected=""></span>
            </div>
          </div>

          <div class="reading-detail-graph" aria-label="Reading graph">
            <div class="reading-detail-graph__title">Reading pace</div>
            <div class="reading-detail-graph__sub">Pages per day from your logged sessions.</div>
            <div class="reading-detail-graph__wrap" data-reading-graph=""></div>
          </div>

          <div class="reading-detail-logs">
            <h3 class="reading-detail-logs-title">Reading notes</h3>
            <div class="reading-detail-logs-list" data-logs-list=""></div>
            <form class="reading-detail-log-form" data-log-form="">
              <textarea class="reading-detail-log-input" placeholder="Add a note or thought..." rows="3" data-log-input=""></textarea>
              <button type="submit" class="reading-detail-log-submit btn btn--small btn--primary">Add note</button>
            </form>
          </div>
        </div>
      </div>
      
      <div class="reading-detail-cover">
        <img src="" alt="" class="reading-detail-cover-img" data-cover-img="" style="display:none;" loading="lazy" onerror="this.style.display='none'; var n=this.nextElementSibling; if(n) n.style.display='flex';" />
        <div class="reading-detail-cover-placeholder" data-cover-placeholder="" style="display:flex;">?</div>
      </div>
    </div>
  </div>
</div>


<div class="reading-lists">
  <div class="reading-top-section">
    <section class="reading-list reading-list--current" aria-labelledby="reading-current-title">
      <h2 id="reading-current-title" class="reading-list__title">Currently reading</h2>
      <div class="reading-cards">
        
        
          
        
          
        
          
        
          
        
          
        
          
            




<article class="reading-card reading-card--clickable" data-book-index="0" role="button" tabindex="0">
  <div class="reading-card__cover-wrap">
    
      <img src="https://covers.openlibrary.org/b/isbn/9780345313867-M.jpg" alt="Cover: The Vampire Lestat" class="reading-card__cover reading-card__cover-img" loading="eager" decoding="async" fetchpriority="high" onerror="this.style.display='none'; var n=this.nextElementSibling; if(n){ n.style.display='flex'; n.setAttribute('aria-hidden','false'); }" />
      <div class="reading-card__cover reading-card__cover--placeholder reading-card__cover-fallback" style="display:none" aria-hidden="true">T</div>
    
  </div>
  <div class="reading-card__body">
    <div class="reading-card__header">
      <h3 class="reading-card__title">The Vampire Lestat</h3>
      
        <span class="reading-card__reread-badge" title="Reread">↻</span>
      
    </div>
    <p class="reading-card__author">Anne Rice</p>
    
      <div class="reading-card__progress">
        <div class="reading-card__progress-track">
          <div class="reading-card__progress-bar" style="width: 23%"></div>
        </div>
        <span class="reading-card__progress-text">p. 119 / 512</span>
      </div>
    
    
    
  </div>
</article>

            
          
        
          
            




<article class="reading-card reading-card--clickable" data-book-index="1" role="button" tabindex="0">
  <div class="reading-card__cover-wrap">
    
      <img src="https://covers.openlibrary.org/b/isbn/9781101965887-M.jpg" alt="Cover: A Knight of the Seven Kingdoms" class="reading-card__cover reading-card__cover-img" loading="eager" decoding="async" fetchpriority="high" onerror="this.style.display='none'; var n=this.nextElementSibling; if(n){ n.style.display='flex'; n.setAttribute('aria-hidden','false'); }" />
      <div class="reading-card__cover reading-card__cover--placeholder reading-card__cover-fallback" style="display:none" aria-hidden="true">A</div>
    
  </div>
  <div class="reading-card__body">
    <div class="reading-card__header">
      <h3 class="reading-card__title">A Knight of the Seven Kingdoms</h3>
      
    </div>
    <p class="reading-card__author">George R.R. Martin</p>
    
      <div class="reading-card__progress">
        <div class="reading-card__progress-track">
          <div class="reading-card__progress-bar" style="width: 11%"></div>
        </div>
        <span class="reading-card__progress-text">p. 41 / 368</span>
      </div>
    
    
    
  </div>
</article>

            
          
        
          
        
          
            




<article class="reading-card reading-card--clickable" data-book-index="2" role="button" tabindex="0">
  <div class="reading-card__cover-wrap">
    
      <img src="https://covers.openlibrary.org/b/isbn/9781608012534-M.jpg" alt="Cover: The Counting House" class="reading-card__cover reading-card__cover-img" loading="eager" decoding="async" fetchpriority="high" onerror="this.style.display='none'; var n=this.nextElementSibling; if(n){ n.style.display='flex'; n.setAttribute('aria-hidden','false'); }" />
      <div class="reading-card__cover reading-card__cover--placeholder reading-card__cover-fallback" style="display:none" aria-hidden="true">T</div>
    
  </div>
  <div class="reading-card__body">
    <div class="reading-card__header">
      <h3 class="reading-card__title">The Counting House</h3>
      
    </div>
    <p class="reading-card__author">David Dabydeen</p>
    
      <div class="reading-card__progress">
        <div class="reading-card__progress-track">
          <div class="reading-card__progress-bar" style="width: 17%"></div>
        </div>
        <span class="reading-card__progress-text">p. 50 / 288</span>
      </div>
    
    
    
  </div>
</article>

            
          
        
      </div>
      
      
    </section>

    <section class="reading-list reading-list--tracker" aria-label="Reading tracker">
      <h2 class="reading-list__title">Reading tracker</h2>
      <p class="reading__sub">Pages read per day. Hover over a cell to see date and pages.</p>
      <div id="reading-tracker" class="reading-tracker"></div>
      <div class="reading-tracker-legend">
        <span class="reading-tracker-legend__label">Less</span>
        <span class="reading-tracker-legend__cell" data-level="0"></span>
        <span class="reading-tracker-legend__cell" data-level="1"></span>
        <span class="reading-tracker-legend__cell" data-level="2"></span>
        <span class="reading-tracker-legend__cell" data-level="3"></span>
        <span class="reading-tracker-legend__label">More</span>
      </div>
    </section>
  </div>

  <section class="reading-list" aria-labelledby="reading-tbr-title">
    <h2 id="reading-tbr-title" class="reading-list__title">To read</h2>
    <div class="reading-cards reading-cards--compact">
      
        
      
        
          




<article class="reading-card reading-card--compact">
  <div class="reading-card__cover-wrap">
    
      <img src="https://covers.openlibrary.org/b/isbn/9781250318572-M.jpg" alt="Cover: The Well of Ascension" class="reading-card__cover reading-card__cover-img" loading="lazy" decoding="async" onerror="this.style.display='none'; var n=this.nextElementSibling; if(n){ n.style.display='flex'; n.setAttribute('aria-hidden','false'); }" />
      <div class="reading-card__cover reading-card__cover--placeholder reading-card__cover-fallback" style="display:none" aria-hidden="true">T</div>
    
  </div>
  <div class="reading-card__body">
    <div class="reading-card__header">
      <h3 class="reading-card__title">The Well of Ascension</h3>
      
        <span class="reading-card__reread-badge" title="Reread">↻</span>
      
    </div>
    <p class="reading-card__author">Brandon Sanderson</p>
    
    
    
  </div>
</article>

        
      
        
          




<article class="reading-card reading-card--compact">
  <div class="reading-card__cover-wrap">
    
      <img src="https://covers.openlibrary.org/b/isbn/9780575089945-M.jpg" alt="Cover: The Hero of Ages" class="reading-card__cover reading-card__cover-img" loading="lazy" decoding="async" onerror="this.style.display='none'; var n=this.nextElementSibling; if(n){ n.style.display='flex'; n.setAttribute('aria-hidden','false'); }" />
      <div class="reading-card__cover reading-card__cover--placeholder reading-card__cover-fallback" style="display:none" aria-hidden="true">T</div>
    
  </div>
  <div class="reading-card__body">
    <div class="reading-card__header">
      <h3 class="reading-card__title">The Hero of Ages</h3>
      
    </div>
    <p class="reading-card__author">Brandon Sanderson</p>
    
    
    
  </div>
</article>

        
      
        
          




<article class="reading-card reading-card--compact">
  <div class="reading-card__cover-wrap">
    
      <img src="https://covers.openlibrary.org/b/isbn/9780316582704-M.jpg" alt="Cover: The Knight and The Moth" class="reading-card__cover reading-card__cover-img" loading="lazy" decoding="async" onerror="this.style.display='none'; var n=this.nextElementSibling; if(n){ n.style.display='flex'; n.setAttribute('aria-hidden','false'); }" />
      <div class="reading-card__cover reading-card__cover--placeholder reading-card__cover-fallback" style="display:none" aria-hidden="true">T</div>
    
  </div>
  <div class="reading-card__body">
    <div class="reading-card__header">
      <h3 class="reading-card__title">The Knight and The Moth</h3>
      
    </div>
    <p class="reading-card__author">Rachel Gillig</p>
    
    
    
  </div>
</article>

        
      
        
          




<article class="reading-card reading-card--compact">
  <div class="reading-card__cover-wrap">
    
      <img src="https://covers.openlibrary.org/b/isbn/9781984821157-M.jpg" alt="Cover: A Clash of Kings" class="reading-card__cover reading-card__cover-img" loading="lazy" decoding="async" onerror="this.style.display='none'; var n=this.nextElementSibling; if(n){ n.style.display='flex'; n.setAttribute('aria-hidden','false'); }" />
      <div class="reading-card__cover reading-card__cover--placeholder reading-card__cover-fallback" style="display:none" aria-hidden="true">A</div>
    
  </div>
  <div class="reading-card__body">
    <div class="reading-card__header">
      <h3 class="reading-card__title">A Clash of Kings</h3>
      
    </div>
    <p class="reading-card__author">George R.R. Martin</p>
    
    
    
  </div>
</article>

        
      
        
      
        
      
        
          




<article class="reading-card reading-card--compact">
  <div class="reading-card__cover-wrap">
    
      <img src="https://covers.openlibrary.org/b/isbn/9780345350688-M.jpg" alt="Cover: The Autobiography of Malcom X" class="reading-card__cover reading-card__cover-img" loading="lazy" decoding="async" onerror="this.style.display='none'; var n=this.nextElementSibling; if(n){ n.style.display='flex'; n.setAttribute('aria-hidden','false'); }" />
      <div class="reading-card__cover reading-card__cover--placeholder reading-card__cover-fallback" style="display:none" aria-hidden="true">T</div>
    
  </div>
  <div class="reading-card__body">
    <div class="reading-card__header">
      <h3 class="reading-card__title">The Autobiography of Malcom X</h3>
      
    </div>
    <p class="reading-card__author">Malcom X</p>
    
    
    
  </div>
</article>

        
      
        
      
    </div>
    
    
  </section>

  <section class="reading-list" aria-labelledby="reading-done-title">
    <h2 id="reading-done-title" class="reading-list__title">Completed</h2>
    <div class="reading-cards">
      
        
          




<article class="reading-card">
  <div class="reading-card__cover-wrap">
    
      <img src="https://covers.openlibrary.org/b/isbn/9780762478873-M.jpg" alt="Cover: How To Be More D&amp;D" class="reading-card__cover reading-card__cover-img" loading="lazy" decoding="async" onerror="this.style.display='none'; var n=this.nextElementSibling; if(n){ n.style.display='flex'; n.setAttribute('aria-hidden','false'); }" />
      <div class="reading-card__cover reading-card__cover--placeholder reading-card__cover-fallback" style="display:none" aria-hidden="true">H</div>
    
  </div>
  <div class="reading-card__body">
    <div class="reading-card__header">
      <h3 class="reading-card__title">How To Be More D&amp;D</h3>
      
    </div>
    <p class="reading-card__author">Kat Kruger</p>
    
    
      <div class="reading-card__rating" aria-label="Rating: 3.5 out of 5">
        
        
          <span class="reading-card__star reading-card__star--on">★</span>
        
          <span class="reading-card__star reading-card__star--on">★</span>
        
          <span class="reading-card__star reading-card__star--on">★</span>
        
          <span class="reading-card__star reading-card__star--on">★</span>
        
          <span class="reading-card__star">★</span>
        
        <span class="reading-card__rating-num">3.5/5</span>
      </div>
    
    
      <p class="reading-card__meta">Finished Jan 2026</p>
    
  </div>
</article>

        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    </div>
    
    
  </section>
</div>

<script>
(function() {
  var el = document.getElementById('reading-tracker');
  var jsonEl = document.getElementById('reading-daily-log');
  if (!el) return;
  var log = {};
  try {
    if (jsonEl && jsonEl.textContent) {
      var p = JSON.parse(jsonEl.textContent);
      if (p && typeof p === 'object' && !Array.isArray(p)) log = p;
    }
  } catch (e) {}
  var DAYS = 84;
  var today = new Date();
  today.setHours(0, 0, 0, 0);
  var maxPages = 1;
  Object.keys(log).forEach(function(k) { var n = parseInt(log[k], 10); if (n > maxPages) maxPages = n; });
  var levels = [0, Math.max(1, Math.floor(maxPages / 4)), Math.max(2, Math.floor(maxPages / 2)), maxPages];
  function level(p) {
    if (!p || p <= 0) return 0;
    if (p <= levels[1]) return 1;
    if (p <= levels[2]) return 2;
    return 3;
  }
  var wrap = document.createElement('div');
  wrap.className = 'reading-tracker__grid';
  for (var i = DAYS - 1; i >= 0; i--) {
    var d = new Date(today);
    d.setDate(d.getDate() - i);
    var key = d.getFullYear() + '-' + String(d.getMonth() + 1).padStart(2, '0') + '-' + String(d.getDate()).padStart(2, '0');
    var pages = log[key] ? parseInt(log[key], 10) : 0;
    var cell = document.createElement('div');
    cell.className = 'reading-tracker__cell reading-tracker__cell--' + level(pages);
    cell.setAttribute('data-date', key);
    cell.setAttribute('data-pages', pages);
    cell.setAttribute('title', key + ': ' + pages + ' page' + (pages !== 1 ? 's' : '') + ' read');
    wrap.appendChild(cell);
  }
  el.appendChild(wrap);

  var tip = document.createElement('div');
  tip.className = 'reading-tracker-tooltip';
  tip.setAttribute('role', 'tooltip');
  tip.setAttribute('aria-hidden', 'true');
  document.body.appendChild(tip);
  function showTip(c, e) {
    var date = c.getAttribute('data-date');
    var pages = c.getAttribute('data-pages');
    tip.textContent = date + ': ' + pages + ' page' + (pages !== '1' ? 's' : '') + ' read';
    tip.style.display = 'block';
    tip.setAttribute('aria-hidden', 'false');
    tip.style.left = (e.clientX + 12) + 'px';
    tip.style.top = (e.clientY + 8) + 'px';
  }
  wrap.querySelectorAll('.reading-tracker__cell').forEach(function(c) {
    c.addEventListener('mouseenter', function(e) { showTip(c, e); });
    c.addEventListener('mouseleave', function() {
      tip.style.display = 'none';
      tip.setAttribute('aria-hidden', 'true');
    });
    c.addEventListener('mousemove', function(e) {
      tip.style.left = (e.clientX + 12) + 'px';
      tip.style.top = (e.clientY + 8) + 'px';
    });
  });
})();
</script>

<script>
(function() {
  var allBooks = [];
  var dailyLog = {};
  var modal = document.getElementById('reading-detail-modal');
  var currentBookIndex = -1;

  try {
    var booksEl = document.getElementById('reading-books-data');
    var logEl = document.getElementById('reading-daily-log');
    if (booksEl) allBooks = JSON.parse(booksEl.textContent) || [];
    if (logEl) dailyLog = JSON.parse(logEl.textContent) || {};
  } catch (e) {}

  function getReadingBooks() {
    return allBooks.filter(function(b) { return b && b.status === 'reading'; });
  }

  function calculateProjectedFinish(book) {
    if (!book.progress_pages || !book.total_pages || !book.date_started) return null;
    var remaining = book.total_pages - book.progress_pages;
    if (remaining <= 0) return null;

    var startDate = new Date(book.date_started);
    var today = new Date();
    today.setHours(0, 0, 0, 0);
    var daysElapsed = Math.max(1, Math.floor((today - startDate) / (1000 * 60 * 60 * 24)));
    var pagesPerDay = book.progress_pages / daysElapsed;
    if (pagesPerDay <= 0) return null;
    var daysRemaining = Math.ceil(remaining / pagesPerDay);
    var finishDate = new Date(today);
    finishDate.setDate(finishDate.getDate() + daysRemaining);
    return finishDate;
  }

  function getLastReadDate(book) {
    if (!book.last_date_read) return null;
    return new Date(book.last_date_read);
  }

  function formatDate(d) {
    if (!d) return '—';
    if (typeof d === 'string') d = parseYMD(d) || new Date(d);
    return d.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
  }

  // Parse "YYYY-MM-DD" as a *local* date (avoids UTC->local off-by-one).
  function parseYMD(s) {
    if (!s || typeof s !== 'string') return null;
    var m = s.match(/^(\d{4})-(\d{2})-(\d{2})$/);
    if (!m) return null;
    var y = parseInt(m[1], 10);
    var mo = parseInt(m[2], 10) - 1;
    var da = parseInt(m[3], 10);
    var dt = new Date(y, mo, da);
    dt.setHours(0, 0, 0, 0);
    return dt;
  }

  function safeParseInt(x) {
    var n = parseInt(x, 10);
    return isNaN(n) ? null : n;
  }

  function pagesFromLogEntry(le) {
    if (!le) return 0;
    var sp = safeParseInt(le.start_page);
    var ep = safeParseInt(le.end_page);
    if (sp == null || ep == null) return 0;
    if (ep < sp) return 0;
    return (ep - sp + 1);
  }

  function normalizeLogs(logs) {
    var out = (logs || []).filter(function(le) { return le && le.date; });
    out.sort(function(a, b) {
      var da = parseYMD(a.date) || new Date(a.date);
      var db = parseYMD(b.date) || new Date(b.date);
      return da - db;
    });
    return out;
  }

  function renderGraph(book) {
    var wrap = document.querySelector('[data-reading-graph]');
    if (!wrap) return;
    wrap.innerHTML = '';

    var logs = normalizeLogs(book.logs);
    if (logs.length === 0) {
      wrap.innerHTML = '<div class="reading-detail-graph__empty">No logged page ranges yet.</div>';
      return;
    }

    // Aggregate pages per day from explicit logs.
    var byDay = {};
    logs.forEach(function(le) {
      var pages = pagesFromLogEntry(le);
      if (pages <= 0) return;
      byDay[le.date] = (byDay[le.date] || 0) + pages;
    });

    // Build a compact last-14-days bar chart ending at last log date.
    var end = parseYMD(logs[logs.length - 1].date) || new Date(logs[logs.length - 1].date);
    end.setHours(0, 0, 0, 0);
    var DAYS = 14;
    var points = [];
    var max = 1;
    for (var i = DAYS - 1; i >= 0; i--) {
      var d = new Date(end);
      d.setDate(d.getDate() - i);
      var key = d.getFullYear() + '-' + String(d.getMonth() + 1).padStart(2, '0') + '-' + String(d.getDate()).padStart(2, '0');
      var v = byDay[key] || 0;
      if (v > max) max = v;
      points.push({ key: key, value: v });
    }

    var w = 520;
    var h = 58;
    var pad = 6;
    var barGap = 4;
    var barW = Math.floor((w - pad * 2 - barGap * (DAYS - 1)) / DAYS);

    var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
    svg.setAttribute('viewBox', '0 0 ' + w + ' ' + h);
    svg.setAttribute('class', 'reading-detail-graph__svg');

    points.forEach(function(p, idx) {
      var bh = p.value <= 0 ? 2 : Math.max(4, Math.round((p.value / max) * (h - pad * 2 - 14)));
      var x = pad + idx * (barW + barGap);
      var y = h - pad - bh;

      var rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
      rect.setAttribute('x', String(x));
      rect.setAttribute('y', String(y));
      rect.setAttribute('width', String(barW));
      rect.setAttribute('height', String(bh));
      rect.setAttribute('rx', '3');
      rect.setAttribute('class', 'reading-detail-graph__bar' + (p.value > 0 ? ' is-active' : ''));
      rect.setAttribute('data-date', p.key);
      rect.setAttribute('data-pages', String(p.value));

      // SVG tooltips work reliably via a <title> child (not a title attribute).
      var title = document.createElementNS('http://www.w3.org/2000/svg', 'title');
      title.textContent = p.key + ': ' + p.value + ' page' + (p.value === 1 ? '' : 's');
      rect.appendChild(title);

      svg.appendChild(rect);
    });

    wrap.appendChild(svg);
  }

  function renderLogsList(book) {
    var logsList = document.querySelector('[data-logs-list]');
    if (!logsList) return;
    logsList.innerHTML = '';

    var logs = normalizeLogs(book.logs);
    if (logs.length === 0) {
      logsList.innerHTML = '<p class="reading-detail-logs-empty">No notes yet. Add your first note below.</p>';
      return;
    }

    logs.forEach(function(log) {
      var item = document.createElement('div');
      item.className = 'reading-detail-log-item';

      var date = document.createElement('div');
      date.className = 'reading-detail-log-date';
      date.textContent = formatDate(log.date);

      var rangePages = pagesFromLogEntry(log);
      var rangeEl = null;
      if (rangePages > 0) {
        var sp = safeParseInt(log.start_page);
        var ep = safeParseInt(log.end_page);
        rangeEl = document.createElement('div');
        rangeEl.className = 'reading-detail-log-range';
        rangeEl.textContent = 'pp. ' + sp + '–' + ep + ' (' + rangePages + ' pages)';
      }

      var text = document.createElement('div');
      text.className = 'reading-detail-log-text';
      text.textContent = log.text || '';

      item.appendChild(date);
      if (rangeEl) item.appendChild(rangeEl);
      if (text.textContent) item.appendChild(text);

      logsList.appendChild(item);
    });
  }

  function openModal(index) {
    var readingBooks = getReadingBooks();
    var book = readingBooks[index];
    if (!book) return;
    currentBookIndex = index;

    var progress = book.progress_pages && book.total_pages ? (book.progress_pages / book.total_pages * 100) : 0;
    document.querySelector('[data-progress-bar]').style.width = progress + '%';
    document.querySelector('[data-progress-text]').textContent = 
      (book.progress_pages || 0) + ' / ' + (book.total_pages || 0) + ' pages';
    document.querySelector('[data-book-title]').textContent = book.title || '';
    document.querySelector('[data-book-author]').textContent = book.author || '';
    document.querySelector('[data-date-started]').textContent = formatDate(book.date_started);
    document.querySelector('[data-date-last]').textContent = formatDate(book.last_date_read);
    document.querySelector('[data-date-projected]').textContent = formatDate(calculateProjectedFinish(book));
    
    var rereadBadge = document.querySelector('[data-reread-badge]');
    if (book.reread) {
      rereadBadge.style.display = 'inline-flex';
    } else {
      rereadBadge.style.display = 'none';
    }

    // Set cover image
    var coverImg = document.querySelector('[data-cover-img]');
    var coverPlaceholder = document.querySelector('[data-cover-placeholder]');
    var titleFirstLetter = (book.title || '?').charAt(0).toUpperCase();
    
    function showPlaceholder() {
      coverImg.style.display = 'none';
      coverPlaceholder.style.display = 'flex';
      coverPlaceholder.textContent = titleFirstLetter;
    }
    
    function showImage(url) {
      coverImg.src = url;
      coverImg.alt = 'Cover: ' + (book.title || '');
      coverImg.style.display = 'block';
      coverPlaceholder.style.display = 'none';
      coverImg.onerror = function() {
        showPlaceholder();
      };
    }
    
    if (book.cover) {
      showImage(book.cover);
    } else if (book.isbn) {
      var isbnStr = String(book.isbn).trim();
      if (isbnStr) {
        var coverUrl = 'https://covers.openlibrary.org/b/isbn/' + isbnStr + '-L.jpg';
        showImage(coverUrl);
      } else {
        showPlaceholder();
      }
    } else {
      showPlaceholder();
    }

    renderGraph(book);
    renderLogsList(book);

    modal.setAttribute('aria-hidden', 'false');
    modal.classList.add('is-open');
    document.body.style.overflow = 'hidden';
  }

  function closeModal() {
    modal.setAttribute('aria-hidden', 'true');
    modal.classList.remove('is-open');
    document.body.style.overflow = '';
    currentBookIndex = -1;
    document.querySelector('[data-log-input]').value = '';
  }

  document.querySelectorAll('.reading-card--clickable').forEach(function(card) {
    card.addEventListener('click', function() {
      var idx = parseInt(card.getAttribute('data-book-index'), 10);
      if (!isNaN(idx)) openModal(idx);
    });
    card.addEventListener('keydown', function(e) {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        var idx = parseInt(card.getAttribute('data-book-index'), 10);
        if (!isNaN(idx)) openModal(idx);
      }
    });
  });

  document.querySelectorAll('[data-close-modal]').forEach(function(btn) {
    btn.addEventListener('click', closeModal);
  });

  document.querySelector('[data-log-form]').addEventListener('submit', function(e) {
    e.preventDefault();
    var input = document.querySelector('[data-log-input]');
    var text = input.value.trim();
    if (!text || currentBookIndex < 0) return;

    var readingBooks = getReadingBooks();
    var book = readingBooks[currentBookIndex];
    if (!book.logs) book.logs = [];
    var newLog = {
      date: new Date().toISOString().split('T')[0],
      text: text
    };
    book.logs.push(newLog);

    renderGraph(book);
    renderLogsList(book);

    input.value = '';
    
    console.log('Note added (not saved to file - edit _data/reading.yml to persist)');
  });

  modal.addEventListener('click', function(e) {
    if (e.target === modal || e.target.classList.contains('reading-detail-overlay')) {
      closeModal();
    }
  });
})();
</script>

  </div>
</div>

    </div>

    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="https://github.com/kianils" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
          <li><a href="https://www.linkedin.com/in/lyla-kiani/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> LinkedIn</a></li>
        
      
    

    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2026 Lyla Kiani. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>









  </body>
</html>
